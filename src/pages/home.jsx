import * as React from "react";
import { useState, useCallback, useMemo } from 'react';

// Sourced from: https://www.kreativekorp.com/ucsur/charts/sitelen.html
const TOKI_TABLE = {
  "A": "\u1900",
  "AKESI": "\u1901",
  "ALA": "\u1902",
  "ALASA": "\u1903",
  "ALE": "\u1904",
  "ANPA": "\u1905",
  "ANTE": "\u1906",
  "ANU": "\u1907",
  "AWEN": "\u1908",
  "E": "\u1909",
  "EN": "\u190A",
  "ESUN": "\u190B",
  "IJO": "\u190C",
  "IKE": "\u190D",
  "ILO": "\u190E",
  "INSA": "\u190F",
  "JAKI": "\u1910",
  "JAN": "\u1911",
  "JELO": "\u1912",
  "JO": "\u1913",
  "KALA": "\u1914",
  "KALAMA": "\u1915",
  "KAMA": "\u1916",
  "KASI": "\u1917",
  "KEN": "\u1918",
  "KEPEKEN": "\u1919",
  "KILI": "\u191A",
  "KIWEN": "\u191B",
  "KO": "\u191C",
  "KON": "\u191D",
  "KULE": "\u191E",
  "KULUPU": "\u191F",
  "KUTE": "\u1920",
  "LA": "\u1921",
  "LAPE": "\u1922",
  "LASO": "\u1923",
  "LAWA": "\u1924",
  "LEN": "\u1925",
  "LETE": "\u1926",
  "LI": "\u1927",
  "LILI": "\u1928",
  "LINJA": "\u1929",
  "LIPU": "\u192A",
  "LOJE": "\u192B",
  "LON": "\u192C",
  "LUKA": "\u192D",
  "LUKIN": "\u192E",
  "LUPA": "\u192F",
  "MA": "\u1930",
  "MAMA": "\u1931",
  "MANI": "\u1932",
  "MELI": "\u1933",
  "MI": "\u1934",
  "MIJE": "\u1935",
  "MOKU": "\u1936",
  "MOLI": "\u1937",
  "MONSI": "\u1938",
  "MU": "\u1939",
  "MUN": "\u193A",
  "MUSI": "\u193B",
  "MUTE": "\u193C",
  "NANPA": "\u193D",
  "NASA": "\u193E",
  "NASIN": "\u193F",
  "NENA": "\u1940",
  "NI": "\u1941",
  "NIMI": "\u1942",
  "NOKA": "\u1943",
  "O": "\u1944",
  "OLIN": "\u1945",
  "ONA": "\u1946",
  "OPEN": "\u1947",
  "PAKALA": "\u1948",
  "PALI": "\u1949",
  "PALISA": "\u194A",
  "PAN": "\u194B",
  "PANA": "\u194C",
  "PI": "\u194D",
  "PILIN": "\u194E",
  "PIMEJA": "\u194F",
  "PINI": "\u1950",
  "PIPI": "\u1951",
  "POKA": "\u1952",
  "POKI": "\u1953",
  "PONA": "\u1954",
  "PU": "\u1955",
  "SAMA": "\u1956",
  "SELI": "\u1957",
  "SELO": "\u1958",
  "SEME": "\u1959",
  "SEWI": "\u195A",
  "SIJELO": "\u195B",
  "SIKE": "\u195C",
  "SIN": "\u195D",
  "SINA": "\u195E",
  "SINPIN": "\u195F",
  "SITELEN": "\u1960",
  "SONA": "\u1961",
  "SOWELI": "\u1962",
  "SULI": "\u1963",
  "SUNO": "\u1964",
  "SUPA": "\u1965",
  "SUWI": "\u1966",
  "TAN": "\u1967",
  "TASO": "\u1968",
  "TAWA": "\u1969",
  "TELO": "\u196A",
  "TENPO": "\u196B",
  "TOKI": "\u196C",
  "TOMO": "\u196D",
  "TU": "\u196E",
  "UNPA": "\u196F",
  "UTA": "\u1970",
  "UTALA": "\u1971",
  "WALO": "\u1972",
  "WAN": "\u1973",
  "WASO": "\u1974",
  "WAWA": "\u1975",
  "WEKA": "\u1976",
  "WILE": "\u1977",
  "NAMAKO": "\u1978",
  "KIN": "\u1979",
  "OKO": "\u197A",
  "KIPISI": "\u197B",
  "LEKO": "\u197C",
  "MONSUTA": "\u197D",
  "TONSI": "\u197E",
  "JASIMA": "\u197F",
  "KIJETESANTAKALU": "\u1980",
  "SOKO": "\u1981",
  "MESO": "\u1982",
  "EPIKU": "\u1983",
  "KOKOSILA": "\u1984",
  "LANPAN": "\u1985",
  "N": "\u1986",
  "MISIKEKE": "\u1987",
  "KU": "\u1988",
  "PAKE": "\u19A0",
  "APEJA": "\u19A1",
  "MAJUNA": "\u19A2",
  "POWE": "\u19A3",
  "[": "\u1993",
  "{": "\u1990",
  "}": "\u1991"
}

export default function IloPiSitelenPona() {
  const [input, setInput] = useState("toki a!");
  
  const tokens = useMemo(() => input.split(/(\b|\[|\]|\{|\})/).filter(word => word.trim().length > 0).map(word => word.toUpperCase()), [input])
  
  const output = useMemo(() => tokens.map(tok => TOKI_TABLE[tok] || tok), [tokens])

  return (
    <>
      <h1 className="title">sina ken pali e sitelen pona</h1>
      <div class="row">
        <h3 style={{marginRight: 2 + 'em'}}>Write your toki pona here:</h3>
        <h3>o sitelen e toki lon toki pona:</h3>
      </div>
      <textarea class="input" value={input} onChange={ev => setInput(ev.target.value)}></textarea>
      <h3>Copy your sitelen pona from here:</h3>
      <p class="output">{JSON.stringify(tokens)}<br/>{output}</p>
    </>
  );
}
